<div class="row">
  <div class="col-sm-12">
    <div class="title-box text-center pt-5">
      <h3 class="title-a">
        Clientes
      </h3>
      <p class="subtitle-a">
        Listado de Clientes
      </p>
      <div class="line-mf"></div>
    </div>
  </div>
</div>
<div class="list__filter__group" role="group">
  <button type="button" (click)="newClient()">Nuevo Cliente</button>
</div>
<div class="card">

  <div class="table-responsive">
    <div class="mat-elevation-z8">
      <div class="order__spinner" *ngIf="loading">
        <mat-spinner></mat-spinner>
      </div>
      <table mat-table [dataSource]="dataSource" *ngIf="!loading" class="mat-elevation-z8" matSort>

        <!-- Id Column -->
        <ng-container matColumnDef="clientId">
          <th mat-header-cell *matHeaderCellDef>
            <div class="header" [matMenuTriggerFor]="menu">
              Id <i class="fa fa-filter"></i>
            </div>
            <mat-menu #menu>
              <div mat-menu-item mat-filter-item [disableRipple]="true">
                <mat-form-field>
                  <mat-select [panelClass]="'mat-elevation-z10'" placeholder='Condiciones'
                    [(value)]="searchCondition.objectId">
                    <mat-option *ngFor="let  condition of conditionsList" [value]="condition.value">{{condition.label}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <div mat-menu-item mat-filter-item [disableRipple]="true">
                <mat-form-field>
                  <input matInput placeholder="Atributos" [(ngModel)]="searchValue.clientId">
                </mat-form-field>
              </div>

              <div mat-menu-item mat-filter-item [disableRipple]="true">
                <button mat-raised-button (click)="clearColumn('clientId')">Limpiar</button>
                <button mat-raised-button color="primary" (click)="applyFilter()">Buscar</button>
              </div>
            </mat-menu>
          </th>
          <td mat-cell *matCellDef="let element"> {{element.attributes.clientId}} </td>
        </ng-container>

        <!-- ClientName Column -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>
            <div class="header" [matMenuTriggerFor]="menu">
              Nombre <i class="fa fa-filter"></i>
            </div>
            <mat-menu #menu>
              <div mat-menu-item mat-filter-item [disableRipple]="true">
                <mat-form-field>
                  <mat-select [panelClass]="'mat-elevation-z10'" placeholder='Condiciones'
                    [(value)]="searchCondition.name">
                    <mat-option *ngFor="let  condition of conditionsList" [value]="condition.value">{{condition.label}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <div mat-menu-item mat-filter-item [disableRipple]="true">
                <mat-form-field>
                  <input matInput placeholder="Atributos" [(ngModel)]="searchValue.name">
                </mat-form-field>
              </div>

              <div mat-menu-item mat-filter-item [disableRipple]="true">
                <button mat-raised-button (click)="clearColumn('name')">Limpiar</button>
                <button mat-raised-button color="primary" (click)="applyFilter()">Buscar</button>

              </div>
            </mat-menu>
          </th>
          <td mat-cell *matCellDef="let element"> {{element.attributes.name}} </td>
        </ng-container>

        <!-- emailId Column -->
        <ng-container matColumnDef="email">
          <th mat-header-cell *matHeaderCellDef>
            <div class="header" [matMenuTriggerFor]="menu">
              Correo <i class="fa fa-filter"></i>
            </div>
            <mat-menu #menu>
              <div mat-menu-item mat-filter-item [disableRipple]="true">
                <mat-form-field>
                  <mat-select [panelClass]="'mat-elevation-z10'" placeholder='Condiciones'
                    [(value)]="searchCondition.email">
                    <mat-option *ngFor="let  condition of conditionsList" [value]="condition.value">{{condition.label}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <div mat-menu-item mat-filter-item [disableRipple]="true">
                <mat-form-field>
                  <input matInput placeholder="Atributos" [(ngModel)]="searchValue.email">
                </mat-form-field>
              </div>

              <div mat-menu-item mat-filter-item [disableRipple]="true">
                <button mat-raised-button (click)="clearColumn('email')">Limpiar</button>
                <button mat-raised-button color="primary" (click)="applyFilter()">Buscar</button>

              </div>
            </mat-menu>
          </th>
          <td mat-cell *matCellDef="let element"> {{element.attributes.email}} </td>
        </ng-container>

        <!-- phoneNumber Column -->
        <ng-container matColumnDef="phoneNumber">
          <th mat-header-cell *matHeaderCellDef>
            <div class="header" [matMenuTriggerFor]="menu">
              Tel√©fono <i class="fa fa-filter"></i>
            </div>
            <mat-menu #menu>
              <div mat-menu-item mat-filter-item [disableRipple]="true">
                <mat-form-field>
                  <mat-select [panelClass]="'mat-elevation-z10'" placeholder='Condiciones'
                    [(value)]="searchCondition.phoneNumber">
                    <mat-option *ngFor="let  condition of conditionsList" [value]="condition.value">{{condition.label}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <div mat-menu-item mat-filter-item [disableRipple]="true">
                <mat-form-field>
                  <input matInput placeholder="Atributos" [(ngModel)]="searchValue.phoneNumber">
                </mat-form-field>
              </div>

              <div mat-menu-item mat-filter-item [disableRipple]="true">
                <button mat-raised-button (click)="clearColumn('phoneNumber')">Limpiar</button>
                <button mat-raised-button color="primary" (click)="applyFilter()">Buscar</button>

              </div>
            </mat-menu>
          </th>
          <td mat-cell *matCellDef="let element"> {{element.attributes.phoneNumber}} </td>
        </ng-container>

        <!-- accions Column -->
        <ng-container matColumnDef="accions">
          <th mat-header-cell *matHeaderCellDef>
            <div class="header">
              Acciones
            </div>

          </th>
          <td mat-cell *matCellDef="let element">
            <div class="actions__row">
              <div>
                <button matTooltip="Editar" class="btn btn-primary btn-xs" data-title="Edit" data-toggle="modal"
                  data-target="#edit" (click)="editClient(element.attributes)"><span
                    class="fa fa-edit"></span></button>
              </div>
              <div>
                <button matTooltip="Eliminar" class="btn btn-danger btn-xs" data-title="Delete" data-toggle="modal"
                  data-target="#delete" (click)="deleteClient(element)"><span class="fa fa-trash"></span></button>
              </div>
            </div>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>

      <mat-paginator [pageSizeOptions]="[10, 20, 30]" showFirstLastButtons></mat-paginator>
    </div>
  </div>

</div>

